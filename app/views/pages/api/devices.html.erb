<article>

<aside class="menu">
</br>
<table>
  <tbody>
    <tr><td><a href="" class="upcase"><%= title %></a></td></tr>
    <tr><td>&raquo; <a href="#get-a-device">Get a device</a></td></tr>
    <tr><td>&raquo; <a href="#get-a-device-private-info">Get a device private info</a></td></tr>
    <tr><td>&raquo; <a href="#get-all-devices">Get all devices</a></td></tr>
    <tr><td>&raquo; <a href="#create-a-device">Create a device</a></td></tr>
    <tr><td>&raquo; <a href="#update-a-device">Update a device</a></td></tr>
    <tr><td>&raquo; <a href="#delete-a-device">Delete a device</a></td></tr>
    <tr><td>&raquo; <a href="#update-properties">Update properties</a></td></tr>
    <tr><td>&raquo; <a href="#execute-a-function">Execute a function</a></td></tr>
  </tbody>
</table>
</aside>

<h1 class="call"><a name="devices"><%= title %></a></h1>

<p>
A device is everything you interact with everyday of your life. You interact with
lights, appliances, alarms, cooling and heating systems, smoke and gas sensors,
rolling shutters and windows, irrigations, video surveillance, gates, multimedia
(audio and video) and much more.
</p>

<p>
The Device API defines a set of services to monitor and control every existing
device. Its final goal is to map every device to a unique URI which provides control
over it.
</p>

<p>
Simplifying a device is characterized by a <a href="/api/types/">type</a> and by the
<a href="/api/types/properties/">properties</a> it inherits from.
For example, when creating a dimmer, the device inherits the <em>status</em>
(<code>on</code> or <code>off</code>) and the <em>intensity</em> (from <code>
0</code> to <code>100</code>) properties from the dimmer type.
</p>

</article>

<br><br>

<article>

<h1 class="call"><a name="get-a-device">GET /devices/:id</a></h1>

<p>Returns extended information for a given device identified from its ID.</p>

<h4>Resource URL</h4>
<div class="preview">
  <pre><code class="no-highlight">GET http://api.lelylan.com/devices/:id</code></pre>
</div>

<h4>Parameters</h4>

<table class="zebra-striped">
  <tbody>
    <tr>
      <td class="parameter">
        <span>id</span>
        <span class="info">required</span>
      </td>
      <td>
        The ID of the desired device.
      </td>
    </tr>
  </tbody>
</table>

<h4>Example Request</h4>

<ul class="nav nav-tabs">
  <li class="active"><a href="#get-a-device-curl" data-toggle="tab" class="curl">Curl</a></li>
  <li><a href="#get-a-device-node" data-toggle="tab" class="node">Node.js</a></li>
  <li><a href="#get-a-device-javascript" data-toggle="tab" class="javascript">Javascript</a></li>
  <li><a href="#get-a-device-ruby" data-toggle="tab" class="ruby">Ruby</a></li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="get-a-device-curl">
    <div class="preview">
      <pre><code class="no-highlight">curl http://api.lelylan.com/devices/&lt;id&gt; \
     -H 'Authorization: Bearer &lt;token&gt;'</code></pre>
    </div>
  </div>
  <div class="tab-pane" id="get-a-device-node">
    <div class="preview">
      <pre><code class="javascript">Lelylan = require('lelylan-node')({ token: token });
Lelylan.Device.find(id, callback);</code></pre>
    </div>
  </div>
  <div class="tab-pane" id="get-a-device-javascript">
    <div class="preview">
      <pre><code># todo</code></pre>
    </div>
  </div>
  <div class="tab-pane" id="get-a-device-ruby">
    <div class="preview">
      <pre><code># todo</code></pre>
    </div>
  </div>
</div>

<h4>Example header response</h4>

<div class="preview"><pre><code class="no-highlight">HTTP/1.1 200 OK</code></pre></div>

<h4 id="device-representation">Example body response</h4>

<div class="preview"><pre><code>{
  "uri": "http://api.lelylan.com/devices/5042344b95fc441000000001",
  "id": "5042344b95fc441000000001",
  "name": "Closet dimmer",
  "type": { "uri": "http://api.lelylan.com/types/5042310470eda60a0000000d" },
  "physical": { "uri": "http://arduino.house.com/5042205c70eda61" },
  "properties": [{
    "uri": "http://api.lelylan.com/properties/50420c7e267ff51000000001",
    "id": "50420c7e267ff51000000001",
    "value": "on",
    "expected": "on",
    "pending": false,
    "suggested": {"on": "On", "off": "Off"}
  }, {
    "uri": "http://api.lelylan.com/properties/50420c3a267ff51300000001",
    "id": "50420c3a267ff51300000001",
    "value": "100",
    "expected": "100",
    "pending": false,
    "suggested": {"0": "Min", "25": "Low", "50": "Half", "75": "High", "100": "Max"}
  }],
  "created_at": "2012-09-01T16:00:32Z",
  "updated_at": "2012-09-01T16:00:32Z"
}</code></pre></div>

<h4>Body Response explained</h4>

<dl>
  <dd><span>uri</span> - Device URI.</dd>
  <dd><span>id</span> - Device ID.</dd>
  <dd><span>name</span> - Device name.</dd>
  <dd><span>type</span> - Device type. <a href="/api/types">Learn more about</a>.</dd>
  <dd><span>physical</span> - Connected physical device URI.
  <a href="/api/physicals">Learn more about</a>.</dd>
  <dt><span>properties</span> - Device properties.</dt>
  <div>
    <dd><span>uri</span> - Property URI.</dd>
    <dd><span>id</span> - Property ID.</dd>
    <dd><span>value</span> - Property value.</dd>
    <dd><span>expected</span> - Expected property value.
    <a href="/community/faq#value-and-expected-value">Learn more about</a>.</dd>
    <dd><span>pending</span> - Property pending status.
    <a href="/community/faq#pending-devices">Learn more about</a>.</dd>
    <dt><span>suggested</span> - List of suggested values.
    <a href="/community/faq#suggested-values">Learn more about</a>.</dt>
  </div>
</dl>

</article>

<br/>

<article>

<h1 class="call"><a name="get-a-device-private-info">GET /devices/:id/privates</a></h1>

<p>
Returns private information for a given device identified from its ID.

For security reasons the <a href="#device-representation">device representation</a> does not
show some sensitive information like the device secret and the activation code. The only way to
get them is to use the private service described in this section.
</p>

<p class="notice">
<span class="label">Notice</span>
To access this service you must use the <a href="/api/oauth#scopes">privates scope</a>.
</p>

<h4>Resource URL</h4>
<div class="preview">
<pre><code class="no-highlight">GET http://api.lelylan.com/devices/:id/privates</code></pre>
</div>

<h4>Parameters</h4>

<table class="zebra-striped">
  <tbody>
    <tr>
      <td class="parameter">
        <span>id</span>
        <span class="info">required</span>
      </td>
      <td>
        The ID of the desired device.
      </td>
    </tr>
  </tbody>
</table>

<h4>Example Request</h4>

<ul class="nav nav-tabs">
  <li class="active"><a href="#get-a-device-private-info-curl" data-toggle="tab" class="curl">Curl</a></li>
  <li><a href="#get-a-device-private-info-node" data-toggle="tab" class="node">Node.js</a></li>
  <li><a href="#get-a-device-private-info-javascript" data-toggle="tab" class="javascript">Javascript</a></li>
  <li><a href="#get-a-device-private-info-ruby" data-toggle="tab" class="ruby">Ruby</a></li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="get-a-device-private-info-curl">
    <div class="preview">
      <pre><code class="no-highlight">curl http://api.lelylan.com/devices/&lt;id&gt;/privates \
    -H 'Authorization: Bearer &lt;token&gt;'</code></pre>
    </div>
  </div>
  <div class="tab-pane" id="get-a-device-private-info-node">
    <div class="preview">
      <pre><code class="javascript">Lelylan = require('lelylan-node')({ token: token });
Lelylan.Device.privates(id, callback);</code></pre>
    </div>
  </div>
  <div class="tab-pane" id="get-a-device-private-info-javascript">
    <div class="preview">
      <pre><code># todo</code></pre>
    </div>
  </div>
  <div class="tab-pane" id="get-a-device-private-info-ruby">
    <div class="preview">
      <pre><code># todo</code></pre>
    </div>
  </div>
</div>


<h4>Example header response</h4>

<div class="preview"><pre><code class="no-highlight">HTTP/1.1 200 OK</code></pre></div>

<h4 id="device-representation">Example body response</h4>

<div class="preview"><pre><code>{
  "uri": "http://api.lelylan.com/devices/5042344b95fc441000000001",
  "id": "5042344b95fc441000000001",
  "name": "Closet dimmer",
  "secret": "0ca70cc411e9e9de25b47b3e76b8a1932ae48bee6e6fa8808b534994dff5045d",
  "activation_code": "3a9e8732e30c7c06031ad28fd5310425bca3d9bc",
}</code></pre></div>

<h4>Body Response explained</h4>

<dl>
  <dd><span>uri</span> - Device URI.</dd>
  <dd><span>id</span> - Device ID.</dd>
  <dd><span>name</span> - Device name.</dd>
  <dd><span>secret</span> - Unique device secret used to secure the communication with the
  physical world. <a href="/api/physicals">Learn more about</a>.</dd>
  <dd><span>activation_code</span> - Device activation code used to claim the device ownership.
  <a href="/api/devices/activations">Learn more about activation</a>.</dd>
</dl>


</article>

<br>

<article>
<h1 class="call"><a name="get-all-devices">GET /devices</a></h1>

<p>Returns a list of owned devices.</p>

<h4>Resource URL</h4>
<div class="preview">
<pre><code class="no-highlight">GET http://api.lelylan.com/devices</code></pre>
</div>

<h4>Parameters</h4>

<table class="zebra-striped">
  <tbody>
    <tr>
      <td class="parameter">
        <span>name</span>
        <span class="info">optional</span>
      </td>
      <td>
        Device name to search.
      </td>
    </tr>
    <tr>
      <td class="parameter">
        <span>type</span>
        <span class="info">optional</span>
      </td>
      <td>
        Type URI to search.
      </td>
    </tr>
    <tr>
      <td class="parameter">
        <span>physical</span>
        <span class="info">optional</span>
      </td>
      <td>
        Physical device URI to search. <a href="/api/physicals">Learn more about</a>
      </td>
    </tr>
    <tr>
      <td class="parameter">
        <span>properties[uri]</span>
        <span class="info">optional</span>
      </td>
      <td>
        Property URI to search.
      </td>
    </tr>
    <tr>
      <td class="parameter">
        <span>properties[value]</span>
        <span class="info">optional</span>
      </td>
      <td>
        Property value to search.
      </td>
    </tr>
    <tr>
      <td class="parameter">
        <span>properties[expected]</span>
        <span class="info">optional</span>
      </td>
      <td>
        Expected value to search.
        <a href="/community/faq#value-and-expected-value">Learn more about</a>
      </td>
    </tr>
    <tr>
      <td class="parameter">
        <span>properties[pending]</span>
        <span class="info">optional</span>
      </td>
      <td>
        Pending property status to search.
        <a href="/community/faq#pending-devices">Learn more about</a>
        <span class="info">Valid values: true, false.</span>
      </td>
    </tr>
    <tr>
      <td class="parameter">
        <span>start</span>
        <span class="info">optional</span>
      </td>
      <td>
        URI of the last fetched record.
        Learn more about <a href="/api/core/#pagination">pagination</a>.
      </td>
    </tr>
    <tr>
      <td class="parameter">
        <span>per</span>
        <span class="info">optional</span>
        <span class="info">default to '25'</span>
      </td>
      <td>
        Number of resources per page.
      </td>
    </tr>
  </tbody>
</table>


<h4>Example Request</h4>

<ul class="nav nav-tabs">
  <li class="active"><a href="#get-all-devices-curl" data-toggle="tab" class="curl">Curl</a></li>
  <li><a href="#get-all-devices-node" data-toggle="tab" class="node">Node.js</a></li>
  <li><a href="#get-all-devices-javascript" data-toggle="tab" class="javascript">Javascript</a></li>
  <li><a href="#get-all-devices-ruby" data-toggle="tab" class="ruby">Ruby</a></li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="get-all-devices-curl">
    <div class="preview"><pre><code class="no-highlight">curl http://api.lelylan.com/devices?properties[value]=on \
     -H 'Authorization: Bearer &lt;token&gt;'</code></pre></div>
  </div>
  <div class="tab-pane" id="get-all-devices-node">
    <div class="preview">
      <pre><code class="javascript">Lelylan = require('lelylan-node')({ token: token });
Lelylan.Device.all({ 'properties[value]': 'on' }, callback);</code></pre>
    </div>
  </div>
  <div class="tab-pane" id="get-all-devices-javascript">
    <div class="preview">
      <pre><code># todo</code></pre>
    </div>
  </div>
  <div class="tab-pane" id="get-all-devices-ruby">
    <div class="preview">
      <pre><code># todo</code></pre>
    </div>
  </div>
</div>

<h4>Example header response</h4>

<div class="preview"><pre><code class="no-highlight">HTTP/1.1 200 OK</code></pre></div>

<h4>Example body response</h4>

<div class="preview"><pre><code class="no-highlight">[
  { # device representation },
  { # device representation },
  ...
]</code></pre></div>

<p>
  See <a href="#device-representation">device representation</a> for body response.
</p>
</article>



<br/>

<article>

<h1 class="call"><a name="create-a-device">POST /devices</a></h1>

<p>
  Create a device and returns extended information for it.
</p>

<h4>Resource URL</h4>
<div class="preview">
<pre><code class="no-highlight">POST  http://api.lelylan.com/devices</code></pre>
</div>

<h4>Parameters</h4>

<table class="zebra-striped">
  <tbody>
    <tr>
      <td class="parameter">
        <span>name</span>
        <span class="info">required</span>
      </td>
      <td>
        Device name.
      </td>
    </tr>
    <tr>
      <td class="parameter">
        <span>type</span>
        <span class="info">required</span>
      </td>
      <td>
        Type URI. See <a href="/api/types#available-types">available types</a> and
        <a href="/api/types/">learn more about</a>.
      </td>
    </tr>
    <tr>
      <td class="parameter">
        <span>physical</span>
        <span class="info">optional</span>
      </td>
      <td>
        Physical device URI. <a href="/api/physicals">Learn more about</a>
      </td>
    </tr>
  </tbody>
</table>


<h4>Example Request</h4>

<ul class="nav nav-tabs">
  <li class="active"><a href="#create-a-device-curl" data-toggle="tab" class="curl">Curl</a></li>
  <li><a href="#create-a-device-node" data-toggle="tab" class="node">Node.js</a></li>
  <li><a href="#create-a-device-javascript" data-toggle="tab" class="javascript">Javascript</a></li>
  <li><a href="#create-a-device-ruby" data-toggle="tab" class="ruby">Ruby</a></li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="create-a-device-curl">
    <div class="preview">
      <pre><code class="no-highlight">curl -X POST http://api.lelylan.com/devices \
     -H 'Authorization: Bearer &lt;token&gt;' \
     -H 'Content-Type: application/json' \
     -d '{
           "name": "Closet dimmer",
           "type": "http://api.lelylan.com/types/5042310470eda60a0000000d",
           "physical": "http://arduino.house.com/5042205c70eda61"
         }'</code></pre>
    </div>
  </div>
  <div class="tab-pane" id="create-a-device-node">
    <div class="preview">
      <pre><code class="javascript">Lelylan = require('lelylan-node')({ token: token });
params = {
  'name': 'Closet dimmer',
  'type': 'http://api.lelylan.com/types/5042310470eda60a0000000d',
  'physical': 'http://arduino.house.com/5042205c70eda61' };

Lelylan.Device.create(params, callback);</code></pre>
    </div>
  </div>
  <div class="tab-pane" id="create-a-device-javascript">
    <div class="preview">
      <pre><code># todo</code></pre>
    </div>
  </div>
  <div class="tab-pane" id="create-a-device-ruby">
    <div class="preview">
      <pre><code># todo</code></pre>
    </div>
  </div>
</div>

<h4>Example header response</h4>

<div class="preview"><pre><code class="no-highlight">HTTP/1.1 201 Created
Location: http://api.lelylan.com/devices/5042344b95fc441000000001</code></pre></div>

<h4>Example body response</h4>

<p>
See <a href="#device-representation">device representation</a> for body response.
</p>

</article>

<br/>

<article>

<h1 class="call"><a name="update-a-device">PUT /devices/:id</a></h1>

<p>
Update a device identified from its ID and returns extended information for it.
</p>

<p class="notice">
<span class="label">notice</span> Right now the device type can not be updated.
</p>

<h4>Resource URL</h4>
<div class="preview">
  <pre><code class="no-highlight">PUT  http://api.lelylan.com/devices/:id</code></pre>
</div>

<h4>Parameters</h4>

<table class="zebra-striped">
  <tbody>
    <tr>
      <td class="parameter">
        <span>id</span>
        <span class="info">required</span>
      </td>
      <td>
        The ID of the desired device.
      </td>
    </tr>
    <tr>
      <td class="parameter">
        <span>name</span>
        <span class="info">optional</span>
      </td>
      <td>
        Device name.
      </td>
    </tr>
    <tr>
      <td class="parameter">
        <span>physical</span>
        <span class="info">optional</span>
      </td>
      <td>
        Physical device URI. <a href="/api/physicals">Learn more about</a>
      </td>
    </tr>
  </tbody>
</table>

<h4>Example Request</h4>

<ul class="nav nav-tabs">
  <li class="active"><a href="#update-a-device-curl" data-toggle="tab" class="curl">Curl</a></li>
  <li><a href="#update-a-device-node" data-toggle="tab" class="node">Node.js</a></li>
  <li><a href="#update-a-device-javascript" data-toggle="tab" class="javascript">Javascript</a></li>
  <li><a href="#update-a-device-ruby" data-toggle="tab" class="ruby">Ruby</a></li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="update-a-device-curl">
    <div class="preview"><pre><code class="no-highlight">curl -X PUT http://api.lelylan.com/devices/&lt;id&gt; \
     -H 'Authorization: Bearer &lt;token&gt;' \
     -H 'Content-Type: application/json' \
     -d '{ "name": "Zigbee closet dimmer" }'</code></pre>
    </div>
  </div>
  <div class="tab-pane" id="update-a-device-node">
    <div class="preview">
      <pre><code class="javascript">Lelylan = require('lelylan-node')({ token: token });
params  = { 'name': 'Zigbee closet dimmer' };
Lelylan.Device.update(id, params, callback);</code></pre>
    </div>
  </div>
  <div class="tab-pane" id="update-a-device-javascript">
    <div class="preview">
      <pre><code># todo</code></pre>
    </div>
  </div>
  <div class="tab-pane" id="update-a-device-ruby">
    <div class="preview">
      <pre><code># todo</code></pre>
    </div>
  </div>
</div>

<h4>Example header response</h4>

<div class="preview"><pre><code class="no-highlight">HTTP/1.1 200 OK</code></pre></div>

<h4>Example body response</h4>

<p>
  See <a href="#device-representation">device representation</a> for body response.
</p>

</article>

<br/>

<article>

<h1 class="call"><a name="delete-a-device">DELETE /devices/:id</a></h1>

<p>
  Delete a device identified from its ID and return extended information for it.
</p>

<h4>Resource URL</h4>
<div class="preview">
<pre><code class="no-highlight">DELETE http://api.lelylan.com/devices/:id</code></pre>
</div>

<h4>Parameters</h4>

<table class="zebra-striped">
  <tbody>
    <tr>
      <td class="parameter">
        <span>id</span>
        <span class="info">required</span>
      </td>
      <td>
        The ID of the desired device.
      </td>
    </tr>
  </tbody>
</table>

<h4>Example Request</h4>

<ul class="nav nav-tabs">
  <li class="active"><a href="#delete-a-device-curl" data-toggle="tab" class="curl">Curl</a></li>
  <li><a href="#delete-a-device-node" data-toggle="tab" class="node">Node.js</a></li>
  <li><a href="#delete-a-device-javascript" data-toggle="tab" class="javascript">Javascript</a></li>
  <li><a href="#delete-a-device-ruby" data-toggle="tab" class="ruby">Ruby</a></li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="delete-a-device-curl">
    <div class="preview"><pre><code class="no-highlight">curl -X DELETE http://api.lelylan.com/devices/&lt;id&gt; \
     -H 'Authorization: Bearer &lt;token&gt;' \
     -H 'Content-Length: 0'</code></pre>
    </div>
  </div>
  <div class="tab-pane" id="delete-a-device-node">
    <div class="preview">
      <pre><code class="javascript">Lelylan = require('lelylan-node')({ token: token });
Lelylan.Device.delete(id, callback);</code></pre>
    </div>
  </div>
  <div class="tab-pane" id="delete-a-device-javascript">
    <div class="preview">
      <pre><code># todo</code></pre>
    </div>
  </div>
  <div class="tab-pane" id="delete-a-device-ruby">
    <div class="preview">
      <pre><code># todo</code></pre>
    </div>
  </div>
</div>

<h4>Example header response</h4>

<div class="preview"><pre><code class="no-highlight">HTTP/1.1 200 OK</code></pre></div>

<h4>Example body response</h4>

<p>
  See <a href="#device-representation">device representation</a> for body response.
</p>

</article>

</br>

<article>

<h1 class="call"><a name="update-properties">PUT /devices/:id/properties</a></h1>

<p>
  Update properties on a device identified from its ID and returns extended
  representation for it. If a physical device is connected, Lelylan forward the
  changes to the <a href="/api/physicals">physical world</a>.
</p>

<h4>Resource URL</h4>
<div class="preview">
<pre><code class="no-highlight">PUT http://api.lelylan.com/devices/:id/properties</code></pre>
</div>

<h4>Parameters</h4>

<table class="zebra-striped">
  <tbody>
    <tr>
      <td class="parameter">
        <span>id</span>
        <span class="info">required</span>
      </td>
      <td>
        The ID of the desired device.
      </td>
    </tr>
    <tr>
      <td class="parameter">
        <span>properties</span>
        <span class="info">required</span>
      </td>
      <td>
        Array of properties to change.
      </td>
    </tr>
    <tr>
      <td class="parameter nested">
        <span>&raquo; property.uri</span>
        <span class="info">required</span>
      </td>
      <td>
        Property URI.
      </td>
    </tr>
    <tr>
      <td class="parameter nested">
        <span>&raquo; property.value</span>
        <span class="info">optional</span>
      </td>
      <td>
        Property value.
      </td>
    </tr>
    <tr>
      <td class="parameter nested">
        <span>&raquo; property.expected</span>
        <span class="info">optional</span>
      </td>
      <td>
        Expected property value. <a href="/community/faq#value-and-expected-value">Learn more about</a>.
      </td>
    </tr>
    <tr>
      <td class="parameter nested">
        <span>&raquo; property.pending</span>
        <span class="info">optional</span>
      </td>
      <td>
        Property pending status. <a href="/community/faq#pending-devices">Learn more about</a>.
        <span class="info">Valid values: true, false.</span>
      </td>
    </tr>
    <tr>
      <td class="parameter nested">
        <span>&raquo; property.suggested</span>
        <span class="info">optional</span>
      </td>
      <td>
        List of suggested values. <a href="/community/faq#suggested-values">Learn more about</a>.
        <span class="info">Valid values: JSON objects.</span>
      </td>
    </tr>
  </tbody>
</table>

<h4>Example Requests</h4>

<p>Set the device <code>status</code> to <code>on</code> and the device <code>intensity</code> to <code>50%</code>.</p>

<ul class="nav nav-tabs">
  <li class="active"><a href="#update-properties-curl" data-toggle="tab" class="curl">Curl</a></li>
  <li><a href="#update-properties-node" data-toggle="tab" class="node">Node.js</a></li>
  <li><a href="#update-properties-javascript" data-toggle="tab" class="javascript">Javascript</a></li>
  <li><a href="#update-properties-ruby" data-toggle="tab" class="ruby">Ruby</a></li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="update-properties-curl">
    <div class="preview"><pre><code class="no-highlight">curl -X PUT http://api.lelylan.com/devices/&lt;id&gt;/properties \
     -H 'Authorization: Bearer &lt;token&gt;' \
     -H 'Content-Type: application/json' \
     -d '{
           "properties": [{
             "uri": "http://api.lelylan.com/properties/&lt;status&gt;",
             "value": "on"
           },{
             "uri": "http://api.lelylan.com/properties/&lt;intensity&gt;",
             "value": "50" }
           ]
         }'</code></pre>
    </div>
  </div>
  <div class="tab-pane" id="update-properties-node">
    <div class="preview">
      <pre><code class="javascript">Lelylan = require('lelylan-node')({ token: token });
params = {
  'properties': [{
    'uri': 'http://api.lelylan.com/properties/&lt;status&gt;',
    'value': 'on' },{
    'uri': 'http://api.lelylan.com/properties/&lt;intensity&gt;',
    'value': '50' }]
};

Lelylan.Device.properties(id, params, callback);</code></pre>
    </div>
  </div>
  <div class="tab-pane" id="update-properties-javascript">
    <div class="preview">
      <pre><code># todo</code></pre>
    </div>
  </div>
  <div class="tab-pane" id="update-properties-ruby">
    <div class="preview">
      <pre><code># todo</code></pre>
    </div>
  </div>
</div>

<div id="physical-request-process">
<%= render 'shared/content/physical_not_physical' %>
</div>

<h4>Example body response</h4>
<p>
  See <a href="#device-representation">device representation</a> for body response.
</p>

</article>

<br/>

<article>

<h1 class="call"><a name="execute-a-function">PUT /devices/:id/functions</a></h1>

<p>
  Execute a function on a device identified from its ID and returns extended representation
  for it. If a physical device is connected, Lelylan forward the changes to the
  <a href="/api/physicals">physical world</a>.
</p>

<h4>Resource URL</h4>
<div class="preview">
<pre><code class="no-highlight">PUT http://api.lelylan.com/devices/:id/functions</code></pre>
</div>

<h4>Parameters</h4>

<table class="zebra-striped">
  <tbody>
    <tr>
      <td class="parameter">
        <span>id</span>
        <span class="info">required</span>
      </td>
      <td>
        The ID of the desired device.
      </td>
    </tr>
    <tr>
      <td class="parameter">
        <span>function</span>
        <span class="info">required</span>
      </td>
      <td>
        Function URI to execute.
      </td>
    </tr>
    <tr>
      <td class="parameter">
        <span>properties</span>
        <span class="info">optional</span>
      </td>
      <td>
        Array of properties.
      </td>
    </tr>
    <tr>
      <td class="parameter nested">
        <span>&raquo; property.uri</span>
        <span class="info">required</span>
      </td>
      <td>
        Property URI.
      </td>
    </tr>
    <tr>
      <td class="parameter nested">
        <span>&raquo; property.value</span>
        <span class="info">optional</span>
      </td>
      <td>
        Property value.
      </td>
    </tr>
    <tr>
      <td class="parameter nested">
        <span>&raquo; property.expected</span>
        <span class="info">optional</span>
      </td>
      <td>
        Expected property value. <a href="/community/faq#value-and-expected-value">Learn more about</a>
      </td>
    </tr>
    <tr>
      <td class="parameter nested">
        <span>&raquo; property.pending</span>
        <span class="info">optional</span>
      </td>
      <td>
        Property pending status. <a href="/community/faq#pending-devices">Learn more about</a>
        <span class="info">Valid values: true, false.</span>
      </td>
    </tr>
  </tbody>
</table>

<h4>Example Requests</h4>

<p>
<strong>Turn on a device</strong>. In this example we do not send properties because the function
<code>turns on</code> set the property <code>status</code> to <code>on</code> by default.
</p>

<ul class="nav nav-tabs">
  <li class="active"><a href="#execute-a-function-i-curl" data-toggle="tab" class="curl">Curl</a></li>
  <li><a href="#execute-a-function-i-node" data-toggle="tab" class="node">Node.js</a></li>
  <li><a href="#execute-a-function-i-javascript" data-toggle="tab" class="javascript">Javascript</a></li>
  <li><a href="#execute-a-function-i-ruby" data-toggle="tab" class="ruby">Ruby</a></li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="execute-a-function-i-curl">
    <div class="preview"><pre><code class="no-highlight">curl -X PUT http://api.lelylan.com/devices/&lt;id&gt;/functions \
     -H 'Authorization: Bearer &lt;token&gt;' \
     -H 'Content-Type: application/json' \
     -d '{ "function": "http://api.lelylan.com/functions/&lt;turn-on&gt;" }'</code></pre>
    </div>
  </div>
  <div class="tab-pane" id="execute-a-function-i-node">
    <div class="preview">
      <pre><code class="javascript">Lelylan = require('lelylan-node')({ token: token });
params  = { 'function': 'http://api.lelylan.com/functions/&lt;turn-on&gt;' };
Lelylan.Device.execute(id, params, callback);</code></pre>
    </div>
  </div>
  <div class="tab-pane" id="execute-a-function-i-javascript">
    <div class="preview">
      <pre><code># todo</code></pre>
    </div>
  </div>
  <div class="tab-pane" id="execute-a-function-i-ruby">
    <div class="preview">
      <pre><code># todo</code></pre>
    </div>
  </div>
</div>

<p>
<strong>Set the device intensity to 90%</strong>. In this example the function sets the
property <code>status</code> to <code>on</code> by default and expects the intensity value
to be sent from the user.
</p>

<ul class="nav nav-tabs">
  <li class="active"><a href="#execute-a-function-ii-curl" data-toggle="tab" class="curl">Curl</a></li>
  <li><a href="#execute-a-function-ii-node" data-toggle="tab" class="node">Node.js</a></li>
  <li><a href="#execute-a-function-ii-javascript" data-toggle="tab" class="javascript">Javascript</a></li>
  <li><a href="#execute-a-function-ii-ruby" data-toggle="tab" class="ruby">Ruby</a></li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="execute-a-function-ii-curl">
    <div class="preview">
      <div class="preview">
        <pre><code class="no-highlight">curl -X PUT http://api.lelylan.com/devices/&lt;id&gt;/functions \
     -H 'Authorization: Bearer &lt;token&gt;' \
     -H 'Content-Type: application/json' \
     -d '{
           'function': 'http://api.lelylan.com/functions/&lt;set-intensity&gt;'
           'properties': [{
             'uri': 'http://api.lelylan.com/properties/&lt;intensity&gt;',
             'value': '90' }
           ]
         }'</code></pre>
      </div>
    </div>
  </div>
  <div class="tab-pane" id="execute-a-function-ii-node">
    <div class="preview">
      <pre><code class="javascript">Lelylan = require('lelylan-node')({ token: token });
params = {
  "function": "http://api.lelylan.com/functions/&lt;set-intensity&gt;"
  "properties": [{
    "uri": "http://api.lelylan.com/properties/&lt;intensity&gt;",
    "value": "90" }]
};

Lelylan.Device.execute(id, params, callback);</code></pre>
    </div>
  </div>
  <div class="tab-pane" id="execute-a-function-ii-javascript">
    <div class="preview">
      <pre><code># todo</code></pre>
    </div>
  </div>
  <div class="tab-pane" id="execute-a-function-ii-ruby">
    <div class="preview">
      <pre><code># todo</code></pre>
    </div>
  </div>
</div>

<p class="notice">
  <span class="label">Notice</span>
  To deeply understand how functions work check out the
  <a href="/api/types/functions">functions API</a>.
</p>

<%= render 'shared/content/physical_not_physical' %>

<h4>Example body response</h4>
<p>
  See <a href="#device-representation">device representation</a> for body response.
</p>

</article>
